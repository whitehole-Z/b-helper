(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-742050e8"],{"0279":function(t,e,a){t.exports=a.p+"img/caseurl.d1868ba4.png"},"4ea4":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"m-main"},[r("el-card",{attrs:{header:"获取数据"}},[r("el-form",{ref:"get",attrs:{"label-width":"150px"}},[r("el-form-item",{attrs:{label:"视频id"}},[r("el-input",{attrs:{type:"text",placeholder:"请输入视频id"},model:{value:t.uid,callback:function(e){t.uid=e},expression:"uid"}}),r("div",{staticClass:"m-tips",staticStyle:{height:"auto"}},[t._v(" 比如： https://www.bilibili.com/video/"),r("span",{staticClass:"m-highlight"},[t._v("BV1Tb411M7FA")]),t._v("?from=search&seid=2936462772170377354&spm_id_from=333.337.0.0 "),r("el-popover",{attrs:{placement:"left",title:"标题",width:"200",trigger:"hover"}},[r("template",{slot:"reference"},[r("i",{staticClass:"el-icon-question"})]),r("template",{slot:"default"},[r("img",{attrs:{src:a("0279"),width:"830"}})])],2)],1)],1),r("el-form-item",{attrs:{label:"接口数据地址"}},[r("div",{staticClass:"grey-font"},[r("a",{attrs:{href:t.url,target:"_blank"}},[t._v(t._s(t.url))])])])],1)],1),r("el-card",{staticStyle:{margin:"10px 0"},attrs:{header:"填写"}},[r("el-form",{ref:"calForm",attrs:{"label-width":"150px"}},[r("el-form-item",{attrs:{label:"数据"}},[r("el-input",{attrs:{type:"textarea",rows:10},model:{value:t.videoData,callback:function(e){t.videoData=e},expression:"videoData"}})],1),r("el-form-item",{attrs:{label:"当前进度"}},[r("el-input",{attrs:{type:"number","aria-placeholder":"当前"},model:{value:t.start,callback:function(e){t.start=e},expression:"start"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.cal}},[t._v("计算")])],1)],1)],1),r("el-card",{attrs:{header:"计算结果"}},[r("div",[t._v("总共 "+t._s(t.minute(t.total))+" 分钟，"+t._s(t.hour(t.total))+" 小时")]),r("div",[t._v("已观看 "+t._s(t.minute(t.total-t.duration))+" 分钟，"+t._s(t.hour(t.total-t.duration))+" 小时")]),r("div",[t._v("剩余 "+t._s(t.minute(t.duration))+" 分钟，"+t._s(t.hour(t.duration))+" 小时")]),r("ve-histogram",{staticClass:"myve",attrs:{data:t.chartData}}),r("div",{staticStyle:{width:"100%","min-height":"300px"},attrs:{id:"pie"}})],1)],1)},i=[],l={props:{},components:{},data(){return{uid:"",videoData:"",start:1,duration:0,videoDataArr:[],vchartsConfig:{setting:{labelMap:{name:"名称",value:"时长（s）"}},extend:{title:{show:!1,text:"实时数据",subtext:"各城市对应的拓展"},legend:{show:!1},xAxis:{type:"category",show:!0,axisLine:{show:!1},axisLabel:{showMaxLabel:!0,showMinLabel:!0,color:"#3a3a3a",rotate:0,margin:8,boundaryGap:!0,formatter:t=>t.length>3?t.substring(0,3)+"...":t},axisTick:{show:!1,alignWithLabel:!0,interval:0,length:4},splitLine:{show:!1,interval:0,lineStyle:{color:"red",backgroundColor:"red"}}},yAxis:{show:!0,offset:0,axisLine:{show:!1},splitLine:{show:!1},axisTick:{show:!1},boundaryGap:!1,axisLabel:{color:"#3a3a3a"}},grid:{show:!0,backgroundColor:"#FFF6F3",borderColor:"#FFF6F3"},series(t){return t.forEach(t=>{t.barWidth=20,t.itemStyle={color:"#FF6633",borderWidth:0},t.label={color:"#666",show:!0,position:"top"}}),t}}}}},watch:{videoData(){const t=this;let e=t.videoData.lastIndexOf("SAVE TO CACHER");if(e>=0)return void(t.videoData=t.videoData.substr(0,e));let a=JSON.parse(t.videoData);t.videoDataArr=a.data.map(t=>({name:t.part,value:t.duration}))}},computed:{url(){return this.uid?"http://api.bilibili.com/x/player/pagelist?bvid="+this.uid:""},chartData(){return{columns:["name","value"],rows:this.videoDataArr}},trueStart(){return Math.max(this.start-1,0)},total(){let t=this.videoDataArr.length,e=0;for(let a=0;a<t;a++)e+=this.videoDataArr[a].value;return e}},methods:{cal(){const t=this;let e=t.videoDataArr.length,a=0;for(let r=t.trueStart;r<e;r++)a+=t.videoDataArr[r].value;t.duration=a,t.pie()},cal2(t){let e=0;for(let a of t)e+=a.value;return e},minute(t){return Math.floor(t/60)},hour(t){return Math.floor(t/3600)},pie(){let t=this.videoDataArr.slice(0,this.trueStart),e=this.videoDataArr.slice(this.trueStart,this.videoDataArr.length),a=[{name:"之前",value:this.cal2(t)},{name:"之后",value:this.cal2(e)}],r=document.getElementById("pie"),i=this.$echarts.init(r),l={title:{text:"观看进度",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} 秒"},legend:{orient:"vertical",left:"left"},series:[{name:"Access From",type:"pie",radius:"50%",data:a,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},normal:{label:{show:!0,formatter:"{b} : {c} ({d}%)"},labelLine:{show:!0}}}]};i.setOption(l)}},created(){},mounted(){}},o=l,s=(a("73d5"),a("2877")),n=Object(s["a"])(o,r,i,!1,null,"5644c5d6",null);e["default"]=n.exports},"73d5":function(t,e,a){"use strict";a("d9d2")},d9d2:function(t,e,a){}}]);